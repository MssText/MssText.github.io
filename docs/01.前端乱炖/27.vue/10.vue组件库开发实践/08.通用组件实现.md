---
title: 通用组件实现
date: 2021-05-24 21:56:01
permalink: /pages/a40f7d/
categories:
  - 前端乱炖
  - vue
  - vue组件库开发实践
tags:
  - 
---
### 前言

主要介绍下`Alert`、`Avatar`、 `Backtop`、`Badge`、`Divider`、`Card`、`Message`的实现原理，不会逐行解释，毕竟相同的组件不同的人的实现思路是不一样的。

### Alert

先回顾下，`Alert` 组件的使用方式。

::: demo
```vue
<template>
  <div class="wapper">
    <ml-alert title="这是一条提示信息"></ml-alert>
  </div>
</template>
<script>
export default {
  data () {}
}
</script>
<style>

</style>
```
:::

之前的文章已经提到了每个组件的目录结构是这样的：
```js
├── index.js
└── main.vue
```
`main.vue`的定义：

```vue
<template>
  <div class="ml-alert" :class="[typeClass]" v-show="visible">
    <i class="ml-alert__icon" :class="[iconClass]" v-if="showIcon"></i>
    <div class="ml-alert__content">
      <span class="ml-alert__title" v-if="title || $slots.title">
        <slot name="title">{{ title }}</slot>
      </span>
      <i
        class="ml-alert__closebtn"
        :class="{
          'ml-icon-close': closeText === '',
        }"
        v-show="closable"
        @click="close()"
        >{{ closeText }}</i
      >
    </div>
  </div>
</template>

<script type="text/babel">
const TYPE_CLASSES_MAP = {
  success: "ml-icon-success",
  warning: "ml-icon-warning",
  error: "ml-icon-error",
};
export default {
  name: "MlAlert",

  props: {
    title: { // 自定义展示的文案
      type: String,
      default: "",
    },
    type: {
      type: String, // success、warning、error
      default: "info",
    },
    closable: { // 是否展示关闭按钮
      type: Boolean,
      default: true,
    },
    closeText: { // 关闭按钮的提示文字
      type: String,
      default: "",
    },
    showIcon: Boolean, // 是否展示icon
    center: Boolean, // 是否居中展示
  },

  data() {
    return {
      visible: true,
    };
  },

  methods: {

    // 关闭Card实例
    close() {
      this.visible = false;
      this.$emit("close");
    },
  },

  computed: {

    // 根据 type 动态计算类名
    typeClass() {
      return `ml-alert--${this.type}`;
    },

    // 根据 type 动态计算 icon 类名
    iconClass() {
      return TYPE_CLASSES_MAP[this.type] || "ml-icon-info";
    },
  },
};
</script>

```

未完待续......
